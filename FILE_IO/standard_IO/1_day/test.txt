/*
funcation:¸´ÖÆasciiÎÄ¼ş
usage:
./fgetc_fputc  src_file  dst_file
 */
#include <stdio.h>
#include <stdlib.h>
#include <strings.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>

void usage(char *s)
{
	printf("usage:\t\n");
	printf("\t%s src_file dst_file\n",s);
	printf("\tsrc_file:the source file is need to copy\n");
	printf("\tdst_file:the destnation file is need to copy\n");
}

int main(int argc,char *argv[])
{
	/*¼ì²é´«µİµÄ²ÎÊıµÄÕıÈ·ĞÔ*/
	FILE *fr,*fw;
	int ch;

	if(argc != 3)
	{
		usage(argv[0]);
		exit(1);
	}

	fr = fopen(argv[1],"r");
	fw = fopen(argv[2],"w");
	if(fr == NULL || fw == NULL)
	{
		fprintf(stderr,"open source file or destination file error...\n");
		exit(1);
	}
#if 1
	do
	{
		ch = fgetc(fr);
		fputc(ch,fw);
	}while(!feof(fr) && !ferror(fr));//¶ÁÈ¡µÄÎÄ¼ş¼ÈÃ»ÓĞµ½´ïÎÄ¼şÄ©Î²Ò²Ã»ÓĞ³ö´í
#else
	ch = fgetc(fr);
	while(!feof(fr) && !ferror(fr))
	{
		fputc(ch,fw);
		ch = fgetc(fr);
		fputc(ch,fw);
		fflush(fw);//Èç¹û²»¼Ófflush()µÄ»°£¬Èç¹ûºóÃæÔì³ÉÒ»¸öËÀÑ­»·£¬ÔòÊı¾İĞ´½øÈ¥£¬Ò»Ö±ÔÚ»º³åÇøÀï
	}
	printf("%d\n",ch);
	//	while(1);
#endif
	fclose(fr);
	fclose(fw);
}


ÿ